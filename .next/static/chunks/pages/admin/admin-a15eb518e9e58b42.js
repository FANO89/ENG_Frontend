(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{3398:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/admin",function(){return s(5764)}])},5764:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var l=s(7876),a=s(4232);function n(){let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(""),[c,o]=(0,a.useState)([]),[d,i]=(0,a.useState)(""),[r,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{fetch("http://localhost:5000/news").then(e=>e.json()).then(e=>o(e))},[]);let u=async l=>{l.preventDefault(),(await fetch(r?"http://localhost:5000/news/".concat(r):"http://localhost:5000/news",{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:s})})).ok?(i(r?"ข่าวแก้ไขสำเร็จ!":"ข่าวเพิ่มสำเร็จ!"),t(""),n(""),h(null),x()):i("เกิดข้อผิดพลาดในการเพิ่ม/แก้ไขข่าว")},x=async()=>{let e=await fetch("http://localhost:5000/news");o(await e.json())},m=e=>{t(e.title),n(e.content),h(e.id)},p=async e=>{(await fetch("http://localhost:5000/news/".concat(e),{method:"DELETE"})).ok?(i("ข่าวถูกลบแล้ว"),x()):i("เกิดข้อผิดพลาดในการลบข่าว")};return(0,l.jsxs)("div",{className:"container mx-auto p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"แดชบอร์ดจัดการข่าว"}),d&&(0,l.jsx)("p",{className:"text-green-500",children:d}),(0,l.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold",children:"หัวข้อข่าว"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border rounded",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold",children:"เนื้อหาข่าว"}),(0,l.jsx)("textarea",{className:"w-full p-2 border rounded",value:s,onChange:e=>n(e.target.value),required:!0})]}),(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:r?"แก้ไขข่าว":"เพิ่มข่าว"})]}),(0,l.jsx)("h2",{className:"text-xl font-semibold mt-8",children:"รายการข่าวทั้งหมด"}),(0,l.jsx)("ul",{className:"space-y-4",children:c.map(e=>(0,l.jsxs)("li",{className:"border p-4 rounded shadow",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:e.title}),(0,l.jsx)("p",{children:e.content}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["วันที่: ",new Date(e.created_at).toLocaleString("th-TH")]}),(0,l.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,l.jsx)("button",{className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",onClick:()=>m(e),children:"แก้ไข"}),(0,l.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",onClick:()=>p(e.id),children:"ลบ"})]})]},e.id))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3398)),_N_E=e.O()}]);